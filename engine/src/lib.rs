mod board;
pub mod engine;

use paste::paste;

macro_rules! generate_eval_tests {
    ($($encoded_board:expr => $expected_score:expr),* $(,)?) => {
        paste! {
            $(
                #[test]
                fn [<evaluation_test_case_ $encoded_board>]() {
                    let mut engine = crate::engine::Engine::new();
                    let board = $encoded_board.parse().unwrap();
                    let score = engine.score(board);

                    assert_eq!(
                        score,
                        $expected_score,
                        "Failed board: {}",
                        $encoded_board
                    );
                }
            )*
        }
    };
}

generate_eval_tests! {
    "2252576253462244111563365343671351441" => -1,
    "7422341735647741166133573473242566" => 1,
    "23163416124767223154467471272416755633" => 0,
    "71255763773133525731261364622167124446454" => 0,
    "65214673556155731566316327373221417" => -1,
    "52677675164321472411331752454" => 0,
    "3135151421347443544172316522225776773566" => 0,
    "562154564361751726662253737734213275114" => 0,
    "233377345754465174223731671122611552" => 1,
    "6763525635134453444361412671365712" => -1,
    "211376455663355325112113664364524722" => 0,
    "3146762114467714356347741621375222" => -1,
    "67152117737262713366376314254" => 6,
    "2762751722231276466633475674533" => 5,
    "3642756176227637211322113551637574556" => 2,
    "22647455554314246733661634615122372377511" => 0,
    "427566236745127177115664464254" => 2,
    "7172212567451542223676134464437761515" => 0,
    "641154574541323641152467137655232232366" => 0,
    "5775265212657176476365522624313714333" => 2,
    "3575316255751336464276636772271112" => -3,
    "75662564375666511575212332122171447733" => 1,
    "3576127617575661522124647446257235344113" => 0,
    "655651721435342216255374674123" => 4,
    "335413424327172446337172625415575517" => 1,
    "12156756715535615116237724723" => -2,
    "4744236462134233111155374771566655522" => -1,
    "144324431445513573673777361765615215226" => 0,
    "466337133772221726726511133452571" => 0,
    "5577777735365512235162362241426611" => -3,
    "6274476136716665132411555412333345" => 0,
    "2166166176633734115273317322475724" => -2,
    "3432357517256661231652672362571175" => 3,
    "26512741647245111351472255277" => -5,
    "3414355576455177144321543311672273" => -2,
    "112471523663662675764743257544335112741" => 0,
    "24555313265147651622632244317534477" => 3,
    "5512371662253342337574526766763245" => 3,
    "27573772361321663724362213661574" => 2,
    "3336513263356226156221176142517577574" => 2
}
